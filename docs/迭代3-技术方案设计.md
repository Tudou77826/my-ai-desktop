# è¿­ä»£ 3 æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡

> **ç›®æ ‡**: å¢å¼º MCP å’Œ Skills ç®¡ç†èƒ½åŠ›ï¼Œæä¾›æ›´å¼ºå¤§çš„é…ç½®å’Œæµ‹è¯•å·¥å…·
> **åˆ›å»ºæ—¥æœŸ**: 2026-02-07

---

## ğŸ“‹ åŠŸèƒ½æ¸…å•

### 1. MCP é«˜çº§ç®¡ç†
- âœ… MCP è¿æ¥æµ‹è¯•é¢æ¿ï¼ˆå®æ—¶å¥åº·çŠ¶æ€ã€å»¶è¿Ÿç›‘æ§ã€å·¥å…·ç»Ÿè®¡ï¼‰
- âœ… MCP å·¥å…·æµè§ˆå™¨ï¼ˆæŸ¥çœ‹å¯è°ƒç”¨å·¥å…·åˆ—è¡¨ã€å·¥å…·è¯¦æƒ…ã€æ‰‹åŠ¨æµ‹è¯•ï¼‰
- âœ… ç¯å¢ƒå˜é‡ç¼–è¾‘å™¨ï¼ˆ${VAR} è¯­æ³•é«˜äº®ã€é»˜è®¤å€¼æ”¯æŒï¼‰
- âœ… æƒé™ç®¡ç†å™¨ï¼ˆallowlist/denylist å¯è§†åŒ–ï¼‰

### 2. Skills å¢å¼º
- âœ… Skill åˆ›å»ºå‘å¯¼ï¼ˆæ­¥éª¤å¼å¼•å¯¼ã€æ¨¡æ¿é€‰æ‹©ã€å®æ—¶éªŒè¯ï¼‰
- âœ… Frontmatter ç¼–è¾‘å™¨ï¼ˆYAML å­—æ®µç¼–è¾‘ã€è¯­æ³•éªŒè¯ã€è‡ªåŠ¨è¡¥å…¨ï¼‰
- âœ… Skill æµ‹è¯•é¢æ¿ï¼ˆæ¨¡æ‹Ÿè°ƒç”¨ã€å‚æ•°è¾“å…¥ã€ç»“æœæŸ¥çœ‹ï¼‰

### 3. ä¸­æ–‡æ”¯æŒï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰
- âœ… è¯­è¨€åˆ‡æ¢å™¨ï¼ˆä¸­/è‹±ï¼‰
- âœ… èœå•å’ŒæŒ‰é’®ç¿»è¯‘
- âœ… æœ¬åœ°åŒ–æ ¼å¼

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•°æ®æ¨¡å‹æ‰©å±•

```typescript
// MCP å·¥å…·ä¿¡æ¯
interface MCPTool {
  name: string;
  description?: string;
  inputSchema?: object;
  permissionStatus: 'allowed' | 'blocked' | 'default';
}

// MCP èµ„æºä¿¡æ¯
interface MCPResource {
  uri: string;
  name?: string;
  description?: string;
  mimeType?: string;
}

// MCP è¿æ¥å¥åº·çŠ¶æ€ï¼ˆæ‰©å±•ï¼‰
interface HealthStatus {
  status: 'unknown' | 'ok' | 'error';
  latency?: number;
  lastCheck: Date;
  error?: string;
  tools?: number;
  resources?: number;
  history?: HealthCheckPoint[]; // æ–°å¢å†å²è®°å½•
}

interface HealthCheckPoint {
  timestamp: Date;
  status: 'ok' | 'error' | 'unknown';
  latency?: number;
}

// Skill æ¨¡æ¿
interface SkillTemplate {
  id: string;
  name: string;
  description: string;
  category: 'productivity' | 'development' | 'automation' | 'custom';
  frontmatter: {
    name: string;
    description?: string;
    author?: string;
    disableModelInvocation?: boolean;
    userInvocable?: boolean;
    allowedTools?: string[];
    model?: string;
    context?: string;
    agent?: string;
    hooks?: string[];
  };
  content: string;
}

// Skill æµ‹è¯•ç»“æœ
interface SkillTestResult {
  success: boolean;
  output?: string;
  error?: string;
  executionTime?: number;
}
```

### åç«¯ API è®¾è®¡

```typescript
// MCP å·¥å…·å’Œèµ„æº
GET  /api/mcp/tools/:serverId              // è·å– MCP å·¥å…·åˆ—è¡¨
GET  /api/mcp/resources/:serverId          // è·å– MCP èµ„æºåˆ—è¡¨
POST /api/mcp/test-tool/:serverId          // æµ‹è¯•è°ƒç”¨ MCP å·¥å…·
GET  /api/mcp/health-history/:serverId     // è·å–å¥åº·æ£€æŸ¥å†å²

// Skill ç®¡ç†
GET  /api/skills/templates                 // è·å– Skill æ¨¡æ¿åˆ—è¡¨
POST /api/skills/create                    // åˆ›å»ºæ–° Skill
POST /api/skills/validate-frontmatter      // éªŒè¯ Frontmatter
POST /api/skills/test/:skillId             // æµ‹è¯• Skill æ‰§è¡Œ
GET  /api/skills/parse-frontmatter         // è§£æ SKILL.md frontmatter

// ç¯å¢ƒå˜é‡
POST /api/env/expand                       // æ‰©å±•ç¯å¢ƒå˜é‡
```

### å‰ç«¯ç»„ä»¶è®¾è®¡

```
src/components/
â”œâ”€â”€ mcp/
â”‚   â”œâ”€â”€ MCPConnectionTester.tsx      # MCPè¿æ¥æµ‹è¯•é¢æ¿
â”‚   â”œâ”€â”€ MCPToolBrowser.tsx           # MCPå·¥å…·æµè§ˆå™¨
â”‚   â”œâ”€â”€ MCPEnvEditor.tsx             # ç¯å¢ƒå˜é‡ç¼–è¾‘å™¨
â”‚   â””â”€â”€ MCPPermissionManager.tsx     # æƒé™ç®¡ç†å™¨
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ SkillCreateWizard.tsx        # Skillåˆ›å»ºå‘å¯¼
â”‚   â”œâ”€â”€ SkillFrontmatterEditor.tsx   # Frontmatterç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ SkillTestPanel.tsx           # Skillæµ‹è¯•é¢æ¿
â”‚   â””â”€â”€ SkillTemplates.tsx           # æ¨¡æ¿é€‰æ‹©ç»„ä»¶
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ LanguageSwitcher.tsx         # è¯­è¨€åˆ‡æ¢å™¨
â”‚   â”œâ”€â”€ LatencyChart.tsx             # å»¶è¿Ÿå›¾è¡¨
â”‚   â””â”€â”€ WizardSteps.tsx              # å‘å¯¼æ­¥éª¤æŒ‡ç¤ºå™¨
â””â”€â”€ i18n/
    â”œâ”€â”€ index.ts                     # i18n é…ç½®
    â”œâ”€â”€ zh-CN.ts                     # ä¸­æ–‡ç¿»è¯‘
    â””â”€â”€ en-US.ts                     # è‹±æ–‡ç¿»è¯‘
```

### Zustand Store æ‰©å±•

```typescript
// æ–°å¢çŠ¶æ€
interface AppStore {
  // ... existing state

  // MCP æ–°çŠ¶æ€
  mcpTools: Map<string, MCPTool[]>;
  mcpResources: Map<string, MCPResource[]>;
  mcpHealthHistory: Map<string, HealthCheckPoint[]>;

  // Skills æ–°çŠ¶æ€
  skillTemplates: SkillTemplate[];
  isCreatingSkill: boolean;
  skillWizardStep: number;

  // å›½é™…åŒ–
  language: 'zh-CN' | 'en-US';

  // æ–°å¢ Actions
  loadMcpTools: (serverId: string) => Promise<void>;
  loadMcpResources: (serverId: string) => Promise<void>;
  testMcpTool: (serverId: string, toolName: string, args: any) => Promise<any>;
  getMcpHealthHistory: (serverId: string) => Promise<void>;

  loadSkillTemplates: () => Promise<void>;
  createSkill: (scope: 'global' | 'project', skill: Partial<SkillTemplate>) => Promise<void>;
  validateSkillFrontmatter: (frontmatter: string) => Promise<ValidationResult>;
  testSkill: (skillId: string, arguments: string[]) => Promise<SkillTestResult>;

  setLanguage: (language: 'zh-CN' | 'en-US') => void;
  setSkillWizardStep: (step: number) => void;
}
```

---

## ğŸ¨ UI/UX è®¾è®¡

### MCP è¿æ¥æµ‹è¯•é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server: filesystem (http)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: â— OK (green)                                   â”‚
â”‚  Latency: 45ms                                          â”‚
â”‚  Tools: 12 | Resources: 3                               â”‚
â”‚  Last Check: 2026-02-07 14:32:15                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Test Connection] [Auto-refresh: 30s â–¾]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Latency History (last 10 checks)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â–â–ƒâ–„â–†â–ˆâ–†â–„â–ƒâ–                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MCP å·¥å…·æµè§ˆå™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tools: filesystem (12 tools)           [Search... ğŸ”] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ read_file                                           â”‚
â”‚     Read file from filesystem                           â”‚
â”‚     Permission: âœ… Allowed                               â”‚
â”‚     [Test] [Details]                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ write_file                                          â”‚
â”‚     Write content to file                               â”‚
â”‚     Permission: âœ… Allowed                               â”‚
â”‚     [Test] [Details]                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ list_directory                                      â”‚
â”‚     List files in directory                             â”‚
â”‚     Permission: âš ï¸ Not in allowlist                     â”‚
â”‚     [Test] [Details]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Skill åˆ›å»ºå‘å¯¼ï¼ˆ3æ­¥ï¼‰

```
Step 1: åŸºæœ¬ä¿¡æ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create New Skill                            Step 1/3   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Skill Name: [my-awesome-skill]                         â”‚
â”‚  Display Name: [My Awesome Skill]                       â”‚
â”‚  Description: [This skill does awesome things...]       â”‚
â”‚  Author: [Your Name]                                    â”‚
â”‚                                                         â”‚
â”‚  Template:                                              â”‚
â”‚    â—‹ Blank                                             â”‚
â”‚    â—‹ Simple Command                                    â”‚
â”‚    â—‹ Advanced Skill (with frontmatter)                 â”‚
â”‚    â— Selected: Simple Command                          â”‚
â”‚                                                         â”‚
â”‚           [Previous] [Next â†’]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Frontmatter é…ç½®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Configure Frontmatter                     Step 2/3     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ```yaml                                                â”‚
â”‚  ---                                                    â”‚
â”‚  name: My Awesome Skill                                 â”‚
â”‚  description: This skill does awesome things            â”‚
â”‚  author: Your Name                                      â”‚
â”‚  userInvocable: true                                    â”‚
â”‚  allowedTools: []                                       â”‚
â”‚  ---                                                    â”‚
â”‚  ```                                                    â”‚
â”‚                                                         â”‚
â”‚  [Validate] [Show Help]                                 â”‚
â”‚                                                         â”‚
â”‚           [â† Previous] [Next â†’]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: å†…å®¹ç¼–è¾‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Write Skill Content                       Step 3/3     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ```markdown                                             â”‚
â”‚  # My Awesome Skill                                     â”‚
â”‚                                                         â”‚
â”‚  This skill helps you...                                â”‚
â”‚                                                         â”‚
â”‚  ## Usage                                               â”‚
â”‚  /my-awesome-skill [arguments]                          â”‚
â”‚  ```                                                    â”‚
â”‚                                                         â”‚
â”‚           [â† Previous] [Create Skill]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯­è¨€åˆ‡æ¢å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š æ¦‚è§ˆ  |  Language: ğŸŒ ä¸­æ–‡ â–¾       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. MCP å·¥å…·è·å–ï¼ˆæ¨¡æ‹Ÿå®ç°ï¼‰

ç”±äº MCP åè®®éœ€è¦å®é™…è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼š

```typescript
// server/handlers/mcp-tools.ts
async function getMcpTools(serverId: string): Promise<MCPTool[]> {
  // å¯¹äº stdio ç±»å‹æœåŠ¡å™¨ï¼Œå°è¯•å¯åŠ¨è¿›ç¨‹å¹¶è°ƒç”¨ tools/list
  // å¯¹äº http ç±»å‹ï¼Œå‘é€ HTTP è¯·æ±‚
  // å¦‚æœæ— æ³•è¿æ¥ï¼Œè¿”å›åŸºäºé…ç½®çš„æ¨¡æ‹Ÿæ•°æ®

  const mockTools: Record<string, MCPTool[]> = {
    'filesystem': [
      {
        name: 'read_file',
        description: 'Read file from filesystem',
        permissionStatus: 'allowed'
      },
      // ...
    ]
  };

  return mockTools[serverId] || [];
}
```

### 2. Skill Frontmatter è§£æ

```typescript
// server/handders/skill-parser.ts
import yaml from 'js-yaml';

function parseSkillFrontmatter(content: string): any {
  const frontmatterRegex = /^---\n([\s\S]*?)\n---/;
  const match = content.match(frontmatterRegex);

  if (!match) return null;

  try {
    return yaml.load(match[1]);
  } catch (error) {
    throw new Error(`Invalid YAML frontmatter: ${error.message}`);
  }
}

function validateSkillFrontmatter(frontmatter: any): ValidationResult {
  const errors: string[] = [];

  if (!frontmatter.name) {
    errors.push('name field is required');
  }

  if (frontmatter.allowedTools && !Array.isArray(frontmatter.allowedTools)) {
    errors.push('allowedTools must be an array');
  }

  return {
    valid: errors.length === 0,
    errors
  };
}
```

### 3. å›½é™…åŒ–å®ç°

```typescript
// src/lib/i18n.ts
import { createInstance } from 'i18next';
import { initReactI18next } from 'react-i18next';
import zhCN from '../locales/zh-CN';
import enUS from '../locales/en-US';

const i18n = createInstance({
  resources: {
    'zh-CN': { translation: zhCN },
    'en-US': { translation: enUS }
  },
  lng: 'zh-CN',
  fallbackLng: 'en-US',
  interpolation: { escapeValue: false }
});

i18n.use(initReactI18next).init();

export default i18n;
```

### 4. ç¯å¢ƒå˜é‡æ‰©å±•

```typescript
// server/handlers/env-expander.ts
function expandEnvVars(value: string, env: Record<string, string> = process.env): string {
  return value.replace(/\$\{([^}:]+)(?::-([^}]*))?\}|\$([A-Z_][A-Z0-9_]*)/g, (_, braced, bracedDefault, unbraced) => {
    const varName = braced || unbraced;
    const defaultValue = bracedDefault || '';
    return env[varName] || defaultValue;
  });
}
```

---

## ğŸ“¦ ä¾èµ–å®‰è£…

```bash
# åç«¯ä¾èµ–
npm install js-yaml

# å‰ç«¯ä¾èµ–
npm install i18next react-i18next recharts
npm install @types/js-yaml --save-dev
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```typescript
// __tests__/env-expander.test.ts
describe('expandEnvVars', () => {
  it('should expand ${VAR} syntax', () => {
    process.env.TEST = 'value';
    expect(expandEnvVars('${TEST}')).toBe('value');
  });

  it('should use default value', () => {
    expect(expandEnvVars('${UNSET:-default}')).toBe('default');
  });
});

// __tests__/skill-parser.test.ts
describe('parseSkillFrontmatter', () => {
  it('should parse valid frontmatter', () => {
    const content = `---\nname: Test\n---\nContent`;
    expect(parseSkillFrontmatter(content)).toEqual({ name: 'Test' });
  });
});
```

### é›†æˆæµ‹è¯•

```typescript
// __tests__/integration/mcp-tools.test.ts
describe('MCP Tools API', () => {
  it('should return tools for a server', async () => {
    const response = await fetch('/api/mcp/tools/filesystem');
    const tools = await response.json();
    expect(tools).toBeInstanceOf(Array);
  });
});
```

---

## ğŸš€ å®æ–½æ­¥éª¤

### Phase 1: åç«¯ APIï¼ˆ2-3å°æ—¶ï¼‰
1. âœ… å®ç° MCP å·¥å…·/èµ„æºè·å–ç«¯ç‚¹
2. âœ… å®ç° Skill åˆ›å»ºå’ŒéªŒè¯ç«¯ç‚¹
3. âœ… å®ç°ç¯å¢ƒå˜é‡æ‰©å±•ç«¯ç‚¹
4. âœ… å®ç° Skill æ¨¡æ¿æ•°æ®

### Phase 2: å‰ç«¯ç»„ä»¶ï¼ˆ4-5å°æ—¶ï¼‰
1. âœ… MCP å·¥å…·æµè§ˆå™¨ç»„ä»¶
2. âœ… MCP è¿æ¥æµ‹è¯•å¢å¼ºï¼ˆå»¶è¿Ÿå›¾è¡¨ï¼‰
3. âœ… Skill åˆ›å»ºå‘å¯¼ç»„ä»¶
4. âœ… Frontmatter ç¼–è¾‘å™¨ç»„ä»¶
5. âœ… Skill æµ‹è¯•é¢æ¿ç»„ä»¶

### Phase 3: å›½é™…åŒ–ï¼ˆ1-2å°æ—¶ï¼‰
1. âœ… i18n é…ç½®
2. âœ… ä¸­è‹±æ–‡ç¿»è¯‘æ–‡ä»¶
3. âœ… è¯­è¨€åˆ‡æ¢å™¨ç»„ä»¶
4. âœ… ç°æœ‰ç»„ä»¶ç¿»è¯‘

### Phase 4: é›†æˆæµ‹è¯•ï¼ˆ1å°æ—¶ï¼‰
1. âœ… ç«¯åˆ°ç«¯æµ‹è¯•
2. âœ… ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–
3. âœ… æ–‡æ¡£æ›´æ–°

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹**: ç¡®ä¿æ–°åŠŸèƒ½ä¸å½±å“ç°æœ‰åŠŸèƒ½
2. **é”™è¯¯å¤„ç†**: æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯
3. **æ€§èƒ½**: MCP å·¥å…·åˆ—è¡¨å¯èƒ½å¾ˆå¤§ï¼Œå®ç°åˆ†é¡µæˆ–è™šæ‹Ÿæ»šåŠ¨
4. **å®‰å…¨æ€§**: éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥ï¼Œç‰¹åˆ«æ˜¯ Skill åˆ›å»º
5. **å¯æµ‹è¯•æ€§**: ç¼–å†™å¯æµ‹è¯•çš„ä»£ç ï¼Œä¾¿äºåç»­ç»´æŠ¤

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**é¢„è®¡å®Œæˆæ—¶é—´**: 8-10å°æ—¶
**å®é™…å®Œæˆæ—¶é—´**: TBD
